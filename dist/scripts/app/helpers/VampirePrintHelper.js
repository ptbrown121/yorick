define(["jquery","backbone"],function(e,a,t){return{format_simpletext:function(e){var a=this.character_override||this.character||this.model;if(this.model.transform_description){var t={name:e,category:"core"};if(_.find(this.model.transform_description,t)){var r=_(this.model.transform_description).select(t).reject({old_text:void 0}).reverse().map("old_text").map(function(e){return"<span style='color: indianred'><i class='fa fa-minus'></i>"+e+"</span>"}).value();return r.push("<span style='color: darkseagreen'><i class='fa fa-plus'></i>"+a.get(e)+"</span>"),r.join(" ")}}return a.get(e)},format_attribute_value:function(e){if(this.model.transform_description){var a={name:e.get("name"),category:"attributes"};if(_.find(this.model.transform_description,a)){var t=_(this.model.transform_description).select(a).reject({fake:void 0}).reverse().map("fake").map(function(e){return"<span style='color: indianred'><i class='fa fa-minus'></i>"+e.get("value")+"</span>"}).value();return t.push("<span style='color: darkseagreen'><i class='fa fa-plus'></i>"+e.get("value")+"</span>"),t.join(" ")}}return e.get("value")},format_attribute_focus:function(e){var a=this,t=this.character_override||this.character||this.model,r="focus_"+e.toLowerCase()+"s";if(this.model.transform_description){var i={category:r};if(_.find(a.model.transform_description,i)){var n=_.map(t.get(r),function(e){var t={category:r,name:e.get("name")};if(_.find(a.model.transform_description,t)){var i=_(a.model.transform_description).select(t).reject({fake:void 0}).reverse().map("fake").map(function(a){return"<span style='color: indianred'><i class='fa fa-minus'></i>"+e.get("name")+"</span>"}).value();return e.is_deleted||i.push("<span style='color: darkseagreen'><i class='fa fa-plus'></i>"+e.get("name")+"</span>"),i.join(" ")}return e.get("name")});return n.join(" ")}}return _.map(t.get(r),function(e){return e.get("name")}).join(" ")},_format_skill_string:function(e,a){var t="O";_.isUndefined(a)&&(a=2);var r,i=e.get("name");if(0==a)return i;if(1==a)return e.has_specialization()?e.get_base_name()+" x"+e.get("value")+": "+e.get_specialization():i+" x"+e.get("value");if(2==a){var n=" x"+e.get("value")+" "+_.repeat(t,e.get("value"));return e.has_specialization()?e.get_base_name()+n+": "+e.get_specialization():i+n}if(3==a){n=" "+_.repeat(t,e.get("value"));return e.has_specialization()?e.get_base_name()+n+": "+e.get_specialization():i+n}return 4==a?e.has_specialization()?e.get_base_name()+" ("+e.get("value")+", "+e.get_specialization()+")":i+" ("+e.get("value")+")":5==a?e.has_specialization()?e.get_base_name()+" ("+e.get_specialization()+")":i:6==a?i+" ("+e.get("value")+")":7==a?(r=e.has_specialization()?i+" ("+e.get_specialization()+")"+t:i+t,_.repeat(r,e.get("value"))):8==a?_.repeat(t,e.get("value")):9==a?e.get("value"):10==a?e.get_specialization():void 0},format_skill:function(e,a){var t=this,r=this._format_skill_string(e,a);if(this.model.transform_description){var i={name:e.get("name"),category:e.get("category")};if(_.find(this.model.transform_description,i)){var n=_(this.model.transform_description).select(i).reject({fake:void 0}).reverse().map("fake").map(function(e){return"<span style='color: indianred'><i class='fa fa-minus'></i>"+t._format_skill_string(e,a)+"</span>"}).value();return e.is_deleted||n.push("<span style='color: darkseagreen'><i class='fa fa-plus'></i>"+r+"</span>"),n.join(" ")}}return r},format_specializations:function(e){var a=this,t=this.character_override||this.character||this.model;if(this.model.transform_description){var r={category:e};if(_.find(a.model.transform_description,r))return _.map(t.get(e),function(t){var r={category:e,name:t.get("name")};if(_.find(a.model.transform_description,r)){var i=_(a.model.transform_description).select(r).reject({fake:void 0}).reverse().map("fake").map(function(e){return"<span style='color: indianred'><i class='fa fa-minus'></i>"+t.get("name")+"</span>"}).value();return t.is_deleted||i.push("<span style='color: darkseagreen'><i class='fa fa-plus'></i>"+t.get("name")+"</span>"),i.join(" ")}return t.get("name")})}return _.pluck(t.get(e),"attributes.name")}}});