define(["jquery","backbone","../models/Description","../collections/DescriptionCollection"],function(e,i,t,a){return i.View.extend({initialize:function(e){_.bindAll(this,"remove","update_value","save_clicked"),this.collection=new a},register:function(e,i,a,n){var l=this,r=!1;if(this.redirectRemove=_.template(a),this.redirectSave=_.template(n),e!==l.simpletrait&&(l.simpletrait=e,r=!0),!_.isEqual(i,l.category)){l.category=i;var s=new Parse.Query(t);return s.equalTo("category",l.category).startsWith("name",l.simpletrait.get_base_name()),l.collection.query=s,l.collection.fetch({reset:!0}).then(function(){return l.render()})}return r?Parse.Promise.as(l.render()):Parse.Promise.as(l)},events:{"click .cancel":"cancel",change:"update_value","click .save":"save_clicked",submit:"save_clicked"},cancel:function(i,t,a){return e.mobile.loading("show"),window.location.hash=this.redirectRemove({self:this}),!1},update_value:function(e,i,t){},save_clicked:function(i){var t=this;i.preventDefault(),e.mobile.loading("show");var a=t.$el.find('input[name="specialization"]').val();return t.simpletrait.set_specialization(a),window.location.hash=t.redirectSave({self:t,b:t.simpletrait}),!1},render:function(){return this.template=_.template(e("script#simpleTraitSpecialization").html())({model:this.simpletrait,name:this.simpletrait.get_base_name(),specialization:this.simpletrait.get_specialization(),description:this.collection.first()}),this.$el.find("div[role='main']").html(this.template),this.$el.enhanceWithin(),this}})});